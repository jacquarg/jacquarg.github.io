<html>
<head>
</head>
<body>
<script>
  // Libs :
  // Decode QueryString
  var decodeQS = function(qs) {
    return qs.split('&').reduce(function(agg, kV) {
      var splitted = kV.split('=');
      agg[splitted[0]] = splitted[1];
      return agg;
    }, {});
  };

  // Encode Query string
  var toQS = function(param) {
    var qs = Object.keys(param).reduce(function(res, k) {
      res += "&" + k + "=" + param[k];
      return res;
    }, "");
    return qs.slice(1);
  }

  // Parse params from URI
  var params = decodeQS(document.location.href.split('?')[1]);
  
  // Perform Facebook login action.
  var login = function() {
    FB.login(function(response) {
      if (response.status === 'connected' && response.authResponse) {
        if (params.redirect === 'display') {
          document.getElementById('token').value = response.authResponse.accessToken;
        } else if (params.redirect === 'opener') {
          window.opener.location.href += '?' + toQS(response.autReponse);

        } else if (params.redirect === 'uri') {
          document.location.href = params.redirect_uri + 
            '?' + toQS(response.authResponse); 
        }
      } else {
        console.error(response);
      }
    }, { scope: params.scope, 'return_scopes': true })
  }


  // Init Facebook sdk
  window.fbAsyncInit = function() {
    console.log("yess");
    FB.init({
      appId: params.appId,
      xfbml: false,
      version: 'v2.5',
    });
    setTimeout(login, 200);
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

</script>
<h1>Login to Facebook</h1>
<input id='token' type='text' />
</body>
</html>